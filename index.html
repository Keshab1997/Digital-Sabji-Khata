<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Digital Sabji Khata - Professional vegetable billing and accounting software for vendors. Manage bills, orders, and vendor payments efficiently.">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' https://cdn-icons-png.flaticon.com data:; connect-src 'self' https://bemicqizbasldpdwglyu.supabase.co; font-src 'self';">
  
  <!-- PWA Meta Tags -->
  <link rel="manifest" href="manifest.json?v=4">
  <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/10981/10981617.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Sabji Khata">
  <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/10981/10981617.png">
  <meta name="theme-color" content="#4CAF50">
  
  <title>Dashboard - VegBillPro</title>
  
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://bemicqizbasldpdwglyu.supabase.co" crossorigin>
  
  <link rel="stylesheet" href="assets/global.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="navbar"></div>
  
  <div class="container">
    <div class="welcome-section">
      <h1 id="welcomeText">Welcome Back!</h1>
      <p id="shopName"></p>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-info">
          <div class="stat-label">Today's Bills</div>
          <div class="stat-value" id="todayBills">0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-info">
          <div class="stat-label">Today's Amount</div>
          <div class="stat-value" id="todayAmount">â‚¹0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-info">
          <div class="stat-label">This Month</div>
          <div class="stat-value" id="monthAmount">â‚¹0</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ”´</div>
        <div class="stat-info">
          <div class="stat-label">Total Due</div>
          <div class="stat-value" id="totalDue">â‚¹0</div>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h2>Quick Actions</h2>
      <div class="action-grid">
        <a href="billing/" class="action-card">
          <div class="action-icon">ğŸ“</div>
          <div class="action-title">New Bill</div>
        </a>
        <a href="orders/" class="action-card">
          <div class="action-icon">ğŸ“¦</div>
          <div class="action-title">New Order</div>
        </a>
        <a href="bill-history/" class="action-card">
          <div class="action-icon">ğŸ“œ</div>
          <div class="action-title">Bill History</div>
        </a>
        <a href="vendors/" class="action-card">
          <div class="action-icon">ğŸª</div>
          <div class="action-title">Vendors</div>
        </a>
      </div>
    </div>

    <div class="recent-section">
      <h2 class="section-header">
        <span>Recent Bills</span>
        <a href="bill-history/" class="view-all">View All â†’</a>
      </h2>
      <div id="recentBills" class="recent-bills"></div>
    </div>

    <div class="top-vendors">
      <h2 class="section-header">
        <span>Top Vendors (By Due)</span>
        <a href="vendors/" class="view-all">View All â†’</a>
      </h2>
      <div id="topVendors" class="vendor-list"></div>
    </div>
  </div>

  <div id="footer"></div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
  <script src="assets/supabase-config.js" defer></script>
  <script src="assets/license-check.js" defer></script>
  <script src="assets/components.js" defer></script>
  <script src="script.js" defer></script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(reg => console.log('PWA Ready!'))
          .catch(err => console.log('PWA Failed!', err));
      });
    }
  </script>
</body>
</html>
